# Разработка в репозитории
## Создание окружения для разработки
1. Создать виртуальное окружение Python:
    ```shell
    python -m venv venv && \
    source /venv/bin/activate && \
    pip install --upgrade setuptools wheel pip && \
    pip install -r requirements.txt
    ```
    _В проекте предполагается использование версии Python >=3.9!_
1. Инициализировать pre-commit:
    ```shell
    pip install pre-commit && \
    pre-commit install
    ```
    pre-commit хуки настроены на действия `commit`, `push` и `checkout`. В нашем случае хуки проверяют [согласованность версий файлов](https://dvc.org/doc/command-reference/install#install) в удаленном хранилище, кеше DVC и, собственно, в самом репозитории.
1. Выгрузить данные из DVC.

    _Команды выполняются из корня проекта! Если по какой-то причине DVC не подхватывает корень, достаточно установить переменную окружения `PYTHONPATH`._

    Посмотреть каких данных не хватает:
    ```shell
    dvc status
    ```
    Выгрузить недостающие данные:
    ```shell
    dvc pull -R data
    ```
1. Внести правки в репозитории...
1. Добавить тесты в `tests` и проверить их работу:
    ```shell
    pytest [tests/path/to/concrete/test.py]
    ```


# Данные для обучения и тестирования

Модель обучена на данных из русской Википедии. Хранение и версионирование данных реализовано с помощью [DVC](https://dvc.org):
- Скрипты для получения данных находятся в директории [scripts](../scripts/).
- Пайплайн вызова соответствующих скриптов доступен в [dvc.yaml](../dvc.yaml).
- Параметры для вызова скриптов подставляются DVC из файла [params.yaml](../params.yaml) автоматически.
- Датасет можно пересобрать заново при необходимости (или изменении параметров):

    ```shell
    dvc repro
    ```

    _Подробнее о работе с пайплайнами DVC можно ознакомиться в [документации](https://dvc.org/doc/user-guide/pipelines#pipelines)._
